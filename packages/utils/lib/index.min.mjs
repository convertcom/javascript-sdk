/*!
 * Convert JS SDK
 * Version 1.0.0
 * Copyright(c) 2020-2022 Convert Insights, Inc
 * License Apache-2.0
 */
import{LogMethod as e,MESSAGES as t,ERROR_MESSAGES as r}from"@convertcom/enums";function n(e){return Array.isArray(e)&&e.length>0}var o,i;class a{static equals(e,t,r){return Array.isArray(e)?this._returnNegationCheck(e.includes(t),r):e.constructor===Object&&"string"==typeof t?this._returnNegationCheck(Object.keys(e).includes(t),r):this._returnNegationCheck(e===t,r)}static less(e,t,r){return typeof e==typeof t&&e!==t&&this._returnNegationCheck(e<t,r)}static lessEqual(e,t,r){return typeof e==typeof t&&(e===t||this._returnNegationCheck(e<=t,r))}static contains(e,t,r){return e=String(e),t=String(t),e=e.valueOf().toLowerCase(),0===(t=t.valueOf().toLowerCase()).replace(/^([\s]*)|([\s]*)$/g,"").length?this._returnNegationCheck(!0,r):this._returnNegationCheck(-1!==e.indexOf(t),r)}static isIn(e,t,r=!1,n="|"){const o=String(e).split(n).map((e=>String(e)));"string"==typeof t&&(t=t.split(n)),Array.isArray(t)||(t=[]),t=t.map((e=>String(e).valueOf().toLowerCase()));for(let e=0;e<o.length;e++){if(-1===t.indexOf(o[e])&&!r)return!1;if(-1!==t.indexOf(o[e])&&r)return!1}return!0}static startsWith(e,t,r){return e=String(e).valueOf().toLowerCase(),t=String(t).valueOf().toLowerCase(),this._returnNegationCheck(0===e.indexOf(t),r)}static endsWith(e,t,r){return e=String(e).valueOf().toLowerCase(),t=String(t).valueOf().toLowerCase(),this._returnNegationCheck(-1!==e.indexOf(t,e.length-t.length),r)}static regexMatches(e,t,r){e=String(e).valueOf().toLowerCase(),t=String(t).valueOf();const n=new RegExp(t,"i");return this._returnNegationCheck(n.test(e),r)}static _returnNegationCheck(e,t=!1){return t?!e:e}}o=a,a.equalsNumber=o.equals,a.matches=o.equals;class s{constructor(e,t){var r,n,o,i;this._file=e,this._fs=t;try{(null===(n=null===(r=this._fs)||void 0===r?void 0:r.existsSync)||void 0===n?void 0:n.call(r,this._file))||null===(i=null===(o=this._fs)||void 0===o?void 0:o.writeFileSync)||void 0===i||i.call(o,this._file,"{}")}catch(e){console.error(e)}}get(e){var t,r;try{return JSON.parse(null===(r=null===(t=this._fs)||void 0===t?void 0:t.readFileSync)||void 0===r?void 0:r.call(t,this._file))[e]}catch(e){console.error(e)}}set(e,t){var r,n,o,i;try{const a=JSON.parse(null===(n=null===(r=this._fs)||void 0===r?void 0:r.readFileSync)||void 0===n?void 0:n.call(r,this._file));a[e]=t,null===(i=null===(o=this._fs)||void 0===o?void 0:o.writeFileSync)||void 0===i||i.call(o,this._file,JSON.stringify(a))}catch(e){console.error(e)}}delete(e){var t,r,n,o;try{const i=JSON.parse(null===(r=null===(t=this._fs)||void 0===t?void 0:t.readFileSync)||void 0===r?void 0:r.call(t,this._file));delete i[e],null===(o=null===(n=this._fs)||void 0===n?void 0:n.writeFileSync)||void 0===o||o.call(n,this._file,JSON.stringify(i))}catch(e){console.error(e)}}}function u(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))}class l{constructor(e,t,r="appendFileSync"){this._file=e,this._fs=t,this._appendMethod=r}_write(e,...t){var r,n;return u(this,void 0,void 0,(function*(){const o=`${(new Date).toISOString()} [${e.toUpperCase()}]`,i=`${o} ${t.map(JSON.stringify).join(`\n${o} `)}\n`;try{null===(n=null===(r=this._fs)||void 0===r?void 0:r[this._appendMethod])||void 0===n||n.call(r,this._file,i)}catch(e){console.warn(e)}}))}log(...t){return u(this,void 0,void 0,(function*(){yield this._write(e.LOG,...t)}))}info(...t){return u(this,void 0,void 0,(function*(){yield this._write(e.INFO,...t)}))}debug(...t){return u(this,void 0,void 0,(function*(){yield this._write(e.DEBUG,...t)}))}warn(...t){return u(this,void 0,void 0,(function*(){yield this._write(e.WARN,...t)}))}error(...t){return u(this,void 0,void 0,(function*(){yield this._write(e.ERROR,...t)}))}}let d,c,h,f;!function(e){e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired"}(i||(i={}));try{d=require("url"),c=require("http"),h=require("https"),f=require("querystring")}catch(e){}const p=e=>!["GET","HEAD","DELETE","TRACE","OPTIONS"].includes(e.toUpperCase()),v=(e,t)=>{let r="";return e&&e.constructor===Object&&!p(t)&&(r="undefined"!=typeof navigator?Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&"):f.stringify(e)),r?`?${r}`:r},g={request(e){var n;const o=(null===(n=null==e?void 0:e.method)||void 0===n?void 0:n.toUpperCase())||"GET",a=(null==e?void 0:e.path)?e.path.startsWith("/")?e.path:`/${e.path}`:"",s=e.baseURL.endsWith("/")?e.baseURL.slice(0,-1):e.baseURL,u=(null==e?void 0:e.responseType)||"json";return new Promise(((n,l)=>{if("undefined"!=typeof navigator){const d={method:o};(null==e?void 0:e.headers)&&(d.headers=e.headers),(null==e?void 0:e.data)&&p(o)&&(d.body=JSON.stringify(e.data));const c=`${s}${a}${v(null==e?void 0:e.data,o)}`;"post"===o.toLowerCase()&&(null===navigator||void 0===navigator?void 0:navigator.sendBeacon)?navigator.sendBeacon(c,d.body)?n({data:!0,status:i.Ok,statusText:t.SEND_BEACON_SUCCESS}):l({message:r.UNSUPPORTED_RESPONSE_TYPE}):fetch(c,d).then((e=>{if(e.status===i.Ok){const t={status:e.status,statusText:e.statusText,headers:e.headers,data:null};switch(u){case"json":t.data=e.json();break;case"arraybuffer":t.data=e.arrayBuffer();break;case"text":t.data=e;break;default:return void l({message:r.UNSUPPORTED_RESPONSE_TYPE})}n(t)}else l({message:e.statusText,status:e.status})})).catch((e=>l({message:null==e?void 0:e.message,status:null==e?void 0:e.status,statusText:null==e?void 0:e.statusText})))}else if(d&&h&&c){const t=d.parse(s);t.port?t.port=Number(t.port):t.port="https:"===t.protocol?443:80;const f=t.path.endsWith("/")?t.path.slice(0,-1):t.path,g="https:"===t.protocol?h:c,y=[],S={hostname:t.hostname,path:`${f}${a}${v(null==e?void 0:e.data,o)}`,port:t.port,method:o},N=(null==e?void 0:e.data)&&p(o)?JSON.stringify(e.data):null;(null==e?void 0:e.headers)&&(S.headers=e.headers),N&&(S.headers||(S.headers={}),S.headers["Content-Length"]=Buffer.byteLength(N));const O=g.request(S,(e=>{e.on("data",(e=>y.push(e))),e.on("end",(()=>{if(e.statusCode===i.Ok){const t=Buffer.concat(y),o=t.toString(),i={status:e.statusCode,statusText:e.statusMessage,headers:e.headers,data:null};switch(u){case"json":i.data=o?JSON.parse(o):"";break;case"arraybuffer":i.data=null==t?void 0:t.buffer;break;case"text":i.data=e;break;default:return void l({message:r.UNSUPPORTED_RESPONSE_TYPE})}n(i)}else l({message:e.statusMessage,status:e.statusCode})}))}));O.on("error",(e=>l({message:null==e?void 0:e.message,status:null==e?void 0:e.code,statusText:null==e?void 0:e.statusText}))),N&&O.write(N),O.end()}else l({message:r.UNABLE_TO_PERFORM_NETWORK_REQUEST})}))}};function y(e,t,r,n=!1){try{if("object"==typeof e){const r=t.split(".").reduce(((e,t)=>e[t]),e);if(r||n&&(!1===r||0===r))return r}}catch(e){}return void 0!==r?r:null}function S(...e){const t=e=>e&&"object"==typeof e;return e.reduce(((e,r)=>(Object.keys(r).forEach((n=>{const o=e[n],i=r[n];Array.isArray(o)&&Array.isArray(i)?e[n]=[...new Set([...i,...o])]:t(o)&&t(i)?e[n]=S(o,i):e[n]=i})),e)),{})}function N(e){return e&&e.constructor===Object&&Object.keys(e).length>0}function O(e,...t){if(t.length){let r=0;return e.replace(/(%?)(%([sj]))/g,((e,n,o,i)=>{if(n)return e;const a=t[r++],s="function"==typeof a?a():a;switch(i){case"s":return String(s);case"j":return JSON.stringify(s)}})).replace("%%","%")}return String(e)}function R(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0==t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"")}function m(e,t){switch(t){case"boolean":return"true"===e||"false"!==e&&!!e;case"float":return!0===e?1:!1===e?0:parseFloat(e);case"json":if("object"==typeof e)return e;try{return JSON.parse(e)}catch(t){return String(e)}case"string":return String(e);case"integer":return!0===e?1:!1===e?0:parseInt(e);default:return e}}export{a as Comparisons,s as DataStore,l as FileLogger,g as HttpClient,n as arrayNotEmpty,R as camelCase,m as castType,S as objectDeepMerge,y as objectDeepValue,N as objectNotEmpty,O as stringFormat};
//# sourceMappingURL=index.min.mjs.map

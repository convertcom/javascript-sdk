/*!
 * Convert JS SDK
 * Version 1.0.0
 * Copyright(c) 2020-2022 Convert Insights, Inc
 * License Apache-2.0
 */
"use strict";var e,t,r=require("@convertcom/enums");class o{static equals(e,t,r){return Array.isArray(e)?this._returnNegationCheck(e.includes(t),r):e.constructor===Object&&"string"==typeof t?this._returnNegationCheck(Object.keys(e).includes(t),r):this._returnNegationCheck(e===t,r)}static less(e,t,r){return typeof e==typeof t&&e!==t&&this._returnNegationCheck(e<t,r)}static lessEqual(e,t,r){return typeof e==typeof t&&(e===t||this._returnNegationCheck(e<=t,r))}static contains(e,t,r){return e=String(e),t=String(t),e=e.valueOf().toLowerCase(),0===(t=t.valueOf().toLowerCase()).replace(/^([\s]*)|([\s]*)$/g,"").length?this._returnNegationCheck(!0,r):this._returnNegationCheck(-1!==e.indexOf(t),r)}static isIn(e,t,r=!1,o="|"){const n=String(e).split(o).map((e=>String(e)));"string"==typeof t&&(t=t.split(o)),Array.isArray(t)||(t=[]),t=t.map((e=>String(e).valueOf().toLowerCase()));for(let e=0;e<n.length;e++){if(-1===t.indexOf(n[e])&&!r)return!1;if(-1!==t.indexOf(n[e])&&r)return!1}return!0}static startsWith(e,t,r){return e=String(e).valueOf().toLowerCase(),t=String(t).valueOf().toLowerCase(),this._returnNegationCheck(0===e.indexOf(t),r)}static endsWith(e,t,r){return e=String(e).valueOf().toLowerCase(),t=String(t).valueOf().toLowerCase(),this._returnNegationCheck(-1!==e.indexOf(t,e.length-t.length),r)}static regexMatches(e,t,r){e=String(e).valueOf().toLowerCase(),t=String(t).valueOf();const o=new RegExp(t,"i");return this._returnNegationCheck(o.test(e),r)}static _returnNegationCheck(e,t=!1){return t?!e:e}}e=o,o.equalsNumber=e.equals,o.matches=e.equals;function n(e,t,r,o){return new(r||(r=Promise))((function(n,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((o=o.apply(e,t||[])).next())}))}let i,a,s,u;!function(e){e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired"}(t||(t={}));try{i=require("url"),a=require("http"),s=require("https"),u=require("querystring")}catch(e){}const l=e=>!["GET","HEAD","DELETE","TRACE","OPTIONS"].includes(e.toUpperCase()),d=(e,t)=>{let r="";return e&&e.constructor===Object&&!l(t)&&(r="undefined"!=typeof navigator?Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&"):u.stringify(e)),r?`?${r}`:r},c={request(e){var o;const n=(null===(o=null==e?void 0:e.method)||void 0===o?void 0:o.toUpperCase())||"GET",u=(null==e?void 0:e.path)?e.path.startsWith("/")?e.path:`/${e.path}`:"",c=e.baseURL.endsWith("/")?e.baseURL.slice(0,-1):e.baseURL,h=(null==e?void 0:e.responseType)||"json";return new Promise(((o,p)=>{if("undefined"!=typeof navigator){const i={method:n};(null==e?void 0:e.headers)&&(i.headers=e.headers),(null==e?void 0:e.data)&&l(n)&&(i.body=JSON.stringify(e.data));const a=`${c}${u}${d(null==e?void 0:e.data,n)}`;"post"===n.toLowerCase()&&(null===navigator||void 0===navigator?void 0:navigator.sendBeacon)?navigator.sendBeacon(a,i.body)?o({data:!0,status:t.Ok,statusText:r.MESSAGES.SEND_BEACON_SUCCESS}):p({message:r.ERROR_MESSAGES.UNSUPPORTED_RESPONSE_TYPE}):fetch(a,i).then((e=>{if(e.status===t.Ok){const t={status:e.status,statusText:e.statusText,headers:e.headers,data:null};switch(h){case"json":t.data=e.json();break;case"arraybuffer":t.data=e.arrayBuffer();break;case"text":t.data=e;break;default:return void p({message:r.ERROR_MESSAGES.UNSUPPORTED_RESPONSE_TYPE})}o(t)}else p({message:e.statusText,status:e.status})})).catch((e=>p({message:null==e?void 0:e.message,status:null==e?void 0:e.status,statusText:null==e?void 0:e.statusText})))}else if(i&&s&&a){const f=i.parse(c);f.port?f.port=Number(f.port):f.port="https:"===f.protocol?443:80;const g=f.path.endsWith("/")?f.path.slice(0,-1):f.path,v="https:"===f.protocol?s:a,y=[],S={hostname:f.hostname,path:`${g}${u}${d(null==e?void 0:e.data,n)}`,port:f.port,method:n},R=(null==e?void 0:e.data)&&l(n)?JSON.stringify(e.data):null;(null==e?void 0:e.headers)&&(S.headers=e.headers),R&&(S.headers||(S.headers={}),S.headers["Content-Length"]=Buffer.byteLength(R));const N=v.request(S,(e=>{e.on("data",(e=>y.push(e))),e.on("end",(()=>{if(e.statusCode===t.Ok){const t=Buffer.concat(y),n=t.toString(),i={status:e.statusCode,statusText:e.statusMessage,headers:e.headers,data:null};switch(h){case"json":i.data=n?JSON.parse(n):"";break;case"arraybuffer":i.data=null==t?void 0:t.buffer;break;case"text":i.data=e;break;default:return void p({message:r.ERROR_MESSAGES.UNSUPPORTED_RESPONSE_TYPE})}o(i)}else p({message:e.statusMessage,status:e.statusCode})}))}));N.on("error",(e=>p({message:null==e?void 0:e.message,status:null==e?void 0:e.code,statusText:null==e?void 0:e.statusText}))),R&&N.write(R),N.end()}else p({message:r.ERROR_MESSAGES.UNABLE_TO_PERFORM_NETWORK_REQUEST})}))}};exports.Comparisons=o,exports.DataStore=class{constructor(e,t){var r,o,n,i;this._file=e,this._fs=t;try{(null===(o=null===(r=this._fs)||void 0===r?void 0:r.existsSync)||void 0===o?void 0:o.call(r,this._file))||null===(i=null===(n=this._fs)||void 0===n?void 0:n.writeFileSync)||void 0===i||i.call(n,this._file,"{}")}catch(e){console.error(e)}}get(e){var t,r;try{return JSON.parse(null===(r=null===(t=this._fs)||void 0===t?void 0:t.readFileSync)||void 0===r?void 0:r.call(t,this._file))[e]}catch(e){console.error(e)}}set(e,t){var r,o,n,i;try{const a=JSON.parse(null===(o=null===(r=this._fs)||void 0===r?void 0:r.readFileSync)||void 0===o?void 0:o.call(r,this._file));a[e]=t,null===(i=null===(n=this._fs)||void 0===n?void 0:n.writeFileSync)||void 0===i||i.call(n,this._file,JSON.stringify(a))}catch(e){console.error(e)}}delete(e){var t,r,o,n;try{const i=JSON.parse(null===(r=null===(t=this._fs)||void 0===t?void 0:t.readFileSync)||void 0===r?void 0:r.call(t,this._file));delete i[e],null===(n=null===(o=this._fs)||void 0===o?void 0:o.writeFileSync)||void 0===n||n.call(o,this._file,JSON.stringify(i))}catch(e){console.error(e)}}},exports.FileLogger=class{constructor(e,t,r="appendFileSync"){this._file=e,this._fs=t,this._appendMethod=r}_write(e,...t){var r,o;return n(this,void 0,void 0,(function*(){const n=`${(new Date).toISOString()} [${e.toUpperCase()}]`,i=`${n} ${t.map(JSON.stringify).join(`\n${n} `)}\n`;try{null===(o=null===(r=this._fs)||void 0===r?void 0:r[this._appendMethod])||void 0===o||o.call(r,this._file,i)}catch(e){console.warn(e)}}))}log(...e){return n(this,void 0,void 0,(function*(){yield this._write(r.LogMethod.LOG,...e)}))}info(...e){return n(this,void 0,void 0,(function*(){yield this._write(r.LogMethod.INFO,...e)}))}debug(...e){return n(this,void 0,void 0,(function*(){yield this._write(r.LogMethod.DEBUG,...e)}))}warn(...e){return n(this,void 0,void 0,(function*(){yield this._write(r.LogMethod.WARN,...e)}))}error(...e){return n(this,void 0,void 0,(function*(){yield this._write(r.LogMethod.ERROR,...e)}))}},exports.HttpClient=c,exports.arrayNotEmpty=function(e){return Array.isArray(e)&&e.length>0},exports.camelCase=function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0==t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"")},exports.castType=function(e,t){switch(t){case"boolean":return"true"===e||"false"!==e&&!!e;case"float":return!0===e?1:!1===e?0:parseFloat(e);case"json":if("object"==typeof e)return e;try{return JSON.parse(e)}catch(t){return String(e)}case"string":return String(e);case"integer":return!0===e?1:!1===e?0:parseInt(e);default:return e}},exports.objectDeepMerge=function e(...t){const r=e=>e&&"object"==typeof e;return t.reduce(((t,o)=>(Object.keys(o).forEach((n=>{const i=t[n],a=o[n];Array.isArray(i)&&Array.isArray(a)?t[n]=[...new Set([...a,...i])]:r(i)&&r(a)?t[n]=e(i,a):t[n]=a})),t)),{})},exports.objectDeepValue=function(e,t,r,o=!1){try{if("object"==typeof e){const r=t.split(".").reduce(((e,t)=>e[t]),e);if(r||o&&(!1===r||0===r))return r}}catch(e){}return void 0!==r?r:null},exports.objectNotEmpty=function(e){return e&&e.constructor===Object&&Object.keys(e).length>0},exports.stringFormat=function(e,...t){if(t.length){let r=0;return e.replace(/(%?)(%([sj]))/g,((e,o,n,i)=>{if(o)return e;const a=t[r++],s="function"==typeof a?a():a;switch(i){case"s":return String(s);case"j":return JSON.stringify(s)}})).replace("%%","%")}return String(e)};
//# sourceMappingURL=index.min.js.map

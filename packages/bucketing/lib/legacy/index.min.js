/*!
 * Convert JS SDK
 * Version 1.0.0
 * Copyright(c) 2020-2022 Convert Insights, Inc
 * License Apache-2.0
 */
"use strict";var e=require("murmurhash"),t=require("@convertcom/js-sdk-utils"),r=require("@convertcom/js-sdk-enums"),i=function(){function i(e,i){var a,s,u=(void 0===i?{}:i).loggerManager;this._max_traffic=1e4,this._hash_seed=9999,this._loggerManager=u,this._max_traffic=t.objectDeepValue(e,"bucketing.max_traffic",1e4,!0),this._hash_seed=t.objectDeepValue(e,"bucketing.hash_seed",9999,!0),null===(s=null===(a=this._loggerManager)||void 0===a?void 0:a.trace)||void 0===s||s.call(a,r.MESSAGES.BUCKETING_CONSTRUCTOR,this)}return i.prototype.selectBucket=function(e,t,r){var i,a;void 0===r&&(r=0);var s=null,u=0;return Object.keys(e).some((function(i){return u+=100*e[i]+r,t<u&&(s=i,!0)})),null===(a=null===(i=this._loggerManager)||void 0===i?void 0:i.debug)||void 0===a||a.call(i,"BucketingManager.selectBucket()",{buckets:e,value:t,redistribute:r},{variation:s}),s||null},i.prototype.getValueVisitorBased=function(t,r){var i,a;void 0===r&&(r=this._hash_seed);var s=e.v3(String(t),r)/4294967296*this._max_traffic,u=parseInt(String(s),10);return null===(a=null===(i=this._loggerManager)||void 0===i?void 0:i.debug)||void 0===a||a.call(i,"BucketingManager.getValueVisitorBased()",{visitorId:t,seed:r,val:s,result:u}),u},i.prototype.getBucketForVisitor=function(e,t,r,i){void 0===r&&(r=0);var a=this.getValueVisitorBased(t,i);return this.selectBucket(e,a,r)},i}();exports.BucketingManager=i;
//# sourceMappingURL=index.min.js.map
